<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mine de Silicium - Idle Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #192837, #040608);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #ecf0f1;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .game-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(52, 73, 94, 0.8);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #3498db;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .mining-section,
        .upgrades-section {
            background: rgba(44, 62, 80, 0.9);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #2980b9;
        }

        .mine-button {
            width: 200px;
            height: 200px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(145deg, #e74c3c, #c0392b);
            color: white;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            transition: all 0.3s;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }

        .mine-button:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
        }

        .mine-button:active {
            transform: scale(0.95);
        }

        .upgrade-item {
            background: rgba(52, 73, 94, 0.6);
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #34495e;
        }

        .upgrade-info {
            flex: 1;
        }

        .upgrade-name {
            font-weight: bold;
            color: #3498db;
        }

        .upgrade-description {
            font-size: 0.9em;
            color: #bdc3c7;
            margin-top: 5px;
        }

        .upgrade-button {
            background: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        .upgrade-button:hover {
            background: #2ecc71;
        }

        .upgrade-button:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #34495e;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2980b9);
            width: 0%;
            transition: width 0.3s;
        }

        .achievements {
            margin-top: 20px;
            background: rgba(44, 62, 80, 0.9);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #f39c12;
        }

        .achievement {
            background: rgba(241, 196, 15, 0.2);
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            border-left: 4px solid #f1c40f;
        }

        .save-buttons {
            text-align: center;
            margin-top: 20px;
        }

        .save-button {
            background: #8e44ad;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 0 10px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .back-button {
            margin-top: 40px;
            display: block;
            text-align: center;
            color: #ff00ff;
            cursor: pointer;
        }

        .back-button:hover {
            color: #ffffff;
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>‚õèÔ∏è Mine de Silicium ‚õèÔ∏è</h1>

        <div class="game-stats">
            <div class="stat-card">
                <div class="stat-value" id="silicon-count">0</div>
                <div>Silicium</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="silicon-per-second">0</div>
                <div>Si/sec</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="total-mined">0</div>
                <div>Total Min√©</div>
            </div>
        </div>

        <div class="main-content">
            <div class="mining-section">
                <h2>Zone de Minage</h2>
                <button class="mine-button" id="mine-btn">
                    MINER<br>
                    +<span id="click-power">1</span> Si
                </button>

                <div class="progress-bar">
                    <div class="progress-fill" id="auto-progress"></div>
                </div>
                <div style="text-align: center;">Minage Automatique</div>
            </div>

            <div class="upgrades-section">
                <h2>Am√©liorations</h2>
                <div id="upgrades-container"></div>
            </div>
        </div>

        <div class="achievements">
            <h2>üèÜ Succ√®s</h2>
            <div id="achievements-container"></div>
        </div>

        <div class="save-buttons">
            <button class="save-button" onclick="saveGame()">Sauvegarder</button>
            <button class="save-button" onclick="loadGame()">Charger</button>
            <button class="save-button" onclick="resetGame()">Reset</button>
        </div>
    </div>

    <div class="back-button" onclick="goBack()">
        üîô Retour au Hub Sacr√©
    </div>

</body>

<audio id="bip" src="../../../bip.mp3" preload="auto"></audio>

<script>

    function goBack() {
        const bip = document.getElementById("bip");
        if (bip) { bip.volume = 0.2; bip.play(); }
        setTimeout(() => {
            window.location.href = '../../mainhub.html';
        }, 500);
    }

    // √âtat du jeu
    let gameState = {
        silicon: 0,
        totalMined: 0,
        clickPower: 1,
        autoMineRate: 0,
        upgrades: {
            betterPickaxe: { level: 0, cost: 10 },
            autoMiner: { level: 0, cost: 50 },
            efficiency: { level: 0, cost: 100 },
            deepDrill: { level: 0, cost: 500 },
            quantumExtractor: { level: 0, cost: 2000 }
        },
        achievements: []
    };

    // D√©finitions des am√©liorations
    const upgradeDefinitions = {
        betterPickaxe: {
            name: "Pioche Am√©lior√©e",
            description: "Double la puissance de clic",
            baseCost: 10,
            effect: (level) => Math.pow(2, level)
        },
        autoMiner: {
            name: "Mineur Automatique",
            description: "+1 Si/sec par niveau",
            baseCost: 50,
            effect: (level) => level
        },
        efficiency: {
            name: "Efficacit√© Mini√®re",
            description: "Augmente tout les gains de 20%",
            baseCost: 100,
            effect: (level) => 1 + (level * 0.2)
        },
        deepDrill: {
            name: "Foreuse Profonde",
            description: "+5 Si/sec par niveau",
            baseCost: 500,
            effect: (level) => level * 5
        },
        quantumExtractor: {
            name: "Extracteur Quantique",
            description: "Multiplie tous les gains par 2",
            baseCost: 2000,
            effect: (level) => Math.pow(2, level)
        }
    };

    // D√©finitions des succ√®s
    const achievements = [
        { id: 'first_click', name: 'Premier Clic', description: 'Miner pour la premi√®re fois', condition: () => gameState.totalMined >= 1 },
        { id: 'hundred_silicon', name: 'Centurion', description: 'Obtenir 100 silicium', condition: () => gameState.totalMined >= 100 },
        { id: 'thousand_silicon', name: 'Millionnaire', description: 'Obtenir 1000 silicium', condition: () => gameState.totalMined >= 1000 },
        { id: 'first_upgrade', name: 'Premi√®re Am√©lioration', description: 'Acheter votre premi√®re am√©lioration', condition: () => Object.values(gameState.upgrades).some(u => u.level > 0) },
        { id: 'auto_miner', name: 'Automatisation', description: 'Acheter un mineur automatique', condition: () => gameState.upgrades.autoMiner.level > 0 }
    ];

    // √âl√©ments DOM
    const elements = {
        siliconCount: document.getElementById('silicon-count'),
        siliconPerSecond: document.getElementById('silicon-per-second'),
        totalMined: document.getElementById('total-mined'),
        clickPower: document.getElementById('click-power'),
        mineBtn: document.getElementById('mine-btn'),
        upgradesContainer: document.getElementById('upgrades-container'),
        achievementsContainer: document.getElementById('achievements-container'),
        autoProgress: document.getElementById('auto-progress')
    };

    // Fonction de minage manuel
    function mine() {
        const gain = gameState.clickPower * getEfficiencyMultiplier();
        gameState.silicon += gain;
        gameState.totalMined += gain;
        updateDisplay();
        checkAchievements();
    }

    // Calcul du multiplicateur d'efficacit√©
    function getEfficiencyMultiplier() {
        return upgradeDefinitions.efficiency.effect(gameState.upgrades.efficiency.level) *
            upgradeDefinitions.quantumExtractor.effect(gameState.upgrades.quantumExtractor.level);
    }

    // Mise √† jour de la puissance de clic
    function updateClickPower() {
        gameState.clickPower = upgradeDefinitions.betterPickaxe.effect(gameState.upgrades.betterPickaxe.level);
    }

    // Mise √† jour du taux de minage automatique
    function updateAutoMineRate() {
        gameState.autoMineRate = (
            upgradeDefinitions.autoMiner.effect(gameState.upgrades.autoMiner.level) +
            upgradeDefinitions.deepDrill.effect(gameState.upgrades.deepDrill.level)
        ) * getEfficiencyMultiplier();
    }

    // Calcul du co√ªt d'une am√©lioration
    function getUpgradeCost(upgradeKey) {
        const upgrade = gameState.upgrades[upgradeKey];
        const definition = upgradeDefinitions[upgradeKey];
        return Math.floor(definition.baseCost * Math.pow(1.15, upgrade.level));
    }

    // Achat d'am√©lioration
    function buyUpgrade(upgradeKey) {
        const cost = getUpgradeCost(upgradeKey);
        if (gameState.silicon >= cost) {
            gameState.silicon -= cost;
            gameState.upgrades[upgradeKey].level++;
            updateClickPower();
            updateAutoMineRate();
            updateDisplay();
            checkAchievements();
        }
    }

    // V√©rification des succ√®s
    function checkAchievements() {
        achievements.forEach(achievement => {
            if (!gameState.achievements.includes(achievement.id) && achievement.condition()) {
                gameState.achievements.push(achievement.id);
                showAchievement(achievement);
            }
        });
        updateAchievementsDisplay();
    }

    // Affichage d'un succ√®s d√©bloqu√©
    function showAchievement(achievement) {
        // Animation simple pour les succ√®s
        console.log(`Succ√®s d√©bloqu√©: ${achievement.name}`);
    }

    // Mise √† jour de l'affichage des succ√®s
    function updateAchievementsDisplay() {
        elements.achievementsContainer.innerHTML = '';
        achievements.forEach(achievement => {
            if (gameState.achievements.includes(achievement.id)) {
                const div = document.createElement('div');
                div.className = 'achievement';
                div.innerHTML = `<strong>${achievement.name}</strong> - ${achievement.description}`;
                elements.achievementsContainer.appendChild(div);
            }
        });
    }

    // Mise √† jour de l'affichage des am√©liorations
    function updateUpgradesDisplay() {
        elements.upgradesContainer.innerHTML = '';
        Object.keys(upgradeDefinitions).forEach(key => {
            const upgrade = gameState.upgrades[key];
            const definition = upgradeDefinitions[key];
            const cost = getUpgradeCost(key);

            const div = document.createElement('div');
            div.className = 'upgrade-item';
            div.innerHTML = `
                    <div class="upgrade-info">
                        <div class="upgrade-name">${definition.name} (Niveau ${upgrade.level})</div>
                        <div class="upgrade-description">${definition.description}</div>
                    </div>
                    <button class="upgrade-button" onclick="buyUpgrade('${key}')" ${gameState.silicon < cost ? 'disabled' : ''}>
                        ${cost} Si
                    </button>
                `;
            elements.upgradesContainer.appendChild(div);
        });
    }

    // Mise √† jour compl√®te de l'affichage
    function updateDisplay() {
        elements.siliconCount.textContent = Math.floor(gameState.silicon);
        elements.siliconPerSecond.textContent = gameState.autoMineRate.toFixed(1);
        elements.totalMined.textContent = Math.floor(gameState.totalMined);
        elements.clickPower.textContent = gameState.clickPower;
        updateUpgradesDisplay();
    }

    // Boucle de jeu (minage automatique)
    function gameLoop() {
        if (gameState.autoMineRate > 0) {
            const gain = gameState.autoMineRate / 10; // Divis√© par 10 car appel√© 10 fois par seconde
            gameState.silicon += gain;
            gameState.totalMined += gain;
        }

        // Animation de la barre de progression
        const progress = (Date.now() % 1000) / 1000 * 100;
        elements.autoProgress.style.width = progress + '%';

        updateDisplay();
    }

    // Sauvegarde
    function saveGame() {
        localStorage.setItem('siliconMineGame', JSON.stringify(gameState));
        alert('Jeu sauvegard√© !');
    }

    // Chargement
    function loadGame() {
        const saved = localStorage.getItem('siliconMineGame');
        if (saved) {
            gameState = JSON.parse(saved);
            updateClickPower();
            updateAutoMineRate();
            updateDisplay();
            updateAchievementsDisplay();
            alert('Jeu charg√© !');
        } else {
            alert('Aucune sauvegarde trouv√©e !');
        }
    }

    // Reset
    function resetGame() {
        if (confirm('√ätes-vous s√ªr de vouloir recommencer ?')) {
            gameState = {
                silicon: 0,
                totalMined: 0,
                clickPower: 1,
                autoMineRate: 0,
                upgrades: {
                    betterPickaxe: { level: 0, cost: 10 },
                    autoMiner: { level: 0, cost: 50 },
                    efficiency: { level: 0, cost: 100 },
                    deepDrill: { level: 0, cost: 500 },
                    quantumExtractor: { level: 0, cost: 2000 }
                },
                achievements: []
            };
            updateDisplay();
            updateAchievementsDisplay();
        }
    }

    // Initialisation
    elements.mineBtn.addEventListener('click', mine);

    // Chargement automatique au d√©marrage
    const saved = localStorage.getItem('siliconMineGame');
    if (saved) {
        gameState = JSON.parse(saved);
        updateClickPower();
        updateAutoMineRate();
    }

    updateDisplay();
    updateAchievementsDisplay();

    // D√©marrage de la boucle de jeu
    setInterval(gameLoop, 100); // 10 FPS

    // Sauvegarde automatique toutes les 30 secondes
    setInterval(() => {
        localStorage.setItem('siliconMineGame', JSON.stringify(gameState));
    }, 30000);
</script>

</html>